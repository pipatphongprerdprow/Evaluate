<template>
    <div class="grid">
        <div class="col-12 lg:col-12 xl:col-12">
            <div class="card mb-0"> 
                <div class="formgroup-inline mb-1">
                   
                    <div class="col md:col-6"> 
                        <h4 v-if="dataP01" class="mb-4 card-header"><i class="pi pi-fw pi-sliders-h" style="font-size: x-large;"></i>  
                            ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô {{ dataP01.d_evaluationround }} ‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì : {{ dataP01.year }}  
                            <!-- {{ dataP01 }} -->
                        </h4> 
                    </div>
                    <!-- <div class="col md:col-4 text-left"> 
                        <label for="dropdownItemYear">‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô : {{ dataP01.evalua }} </label> 
                    </div>
                    <div class="col md:col-3 text-left"> 
                        <label for="dropdownItemYear">‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì : {{ dataP01.year }}  {{ user.user.name.SCOPES?.staffdepartment }}</label> 
                    </div>     --> 
                    <div class="col md:col-6 text-right"> 
                        <Button icon="pi pi-plus" severity="warning" class="mb-2 mr-2" label="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô" @click="OpenDialogAddwork" /> 
                        <Button icon="pi pi-plus" severity="help" class="mb-2 mr-2" label="‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô" @click="OpenDialogAdd" /> 
                        <Button  icon="pi pi-copy"  severity="success" class="mb-2" label="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô" @click="copyEvaluationData" />
 
                        <Dialog header="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡∏ö ‡∏õ01" maximizable v-model:visible="DialogAdd" :breakpoints="{ '960px': '75vw' }" :style="{ width: '100vw' }" :modal="true" position="top">
                            <form>
                                <InputText v-model="text_edt" type="hidden" style="display: none;" />
                                <div class="p-fluid formgrid grid"> 
                                    <div class="field col-12 md:col-4">
                                        <label for="dropdownItemH">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô</label>
                                        <Dropdown id="dropdownItemH" v-model="dropdownItemH" :options="dropdownItemsH" optionLabel="nameH" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô"></Dropdown>
                                    </div>
                                    <div class="field col-12 md:col-2">
                                        <label for="text_no">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà</label>
                                        <InputGroup>
                                            <InputGroupAddon>
                                                <i class="pi pi-calendar-plus"></i>
                                            </InputGroupAddon>
                                            <InputText v-model="text_no" type="number" placeholder="‡∏Ç‡πâ‡∏≠" autocomplete="off" /> 
                                        </InputGroup> 
                                    </div>
                                    <div class="field col-12 md:col-6">
                                        <label for="text_name">‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</label>
                                        <InputGroup>
                                            <InputGroupAddon>
                                                <i class="pi pi-book"></i>
                                            </InputGroupAddon>
                                            <Textarea v-model="text_name" rows="1" placeholder="‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á" autocomplete="off" /> 
                                        </InputGroup>  
                                    </div> 
                                    <div class="field col-12 md:col-3">
                                        <label for="text_target">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</label>
                                        <Dropdown id="dropdownItemTarget" v-model="dropdownItemTarget" :options="dropdownItemsTarget" optionLabel="name" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢"></Dropdown>
                                    </div> 
                                    <div class="field col-12 md:col-4">
                                        <label for="text_weight">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å(‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô)</label>
                                        <InputGroup>
                                            <InputGroupAddon>
                                                <i class="pi pi-tags"></i>
                                            </InputGroupAddon>
                                            <InputText v-model="text_weight" type="number" placeholder="‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å(‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç / ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô)" autocomplete="off" />  
                                        </InputGroup>  
                                    </div>  
                                </div> 
                                <hr>
                                <div class="p-fluid formgrid grid">
                                    <div class="field col-12 md:col-12"> 
                                        <label for="text_search_no">‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</label>
                                        <InputGroup>  
                                            <InputText v-model="text_search_no" type="number" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö" autocomplete="off" class="col-12 md:col-2" /> 
                                            <InputText v-model="text_search" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô" autocomplete="off"/> 
                                            <!-- <Button icon="pi pi-save" label="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" severity="warning" @click="AddDatalist" /> -->
                                             <Button icon="pi pi-save" label="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" severity="warning" @click.prevent="AddDatalist" /> 
                                        </InputGroup>  
                                    </div>   
                                </div> 
                                <DataTable :value="products_list" :rows="10" :paginator="true" responsiveLayout="scroll" dataKey="id">    
                                    <Column field="ind_no" header="‡∏•‡∏≥‡∏î‡∏±‡∏ö" style="width: 10%">
                                        <template #body="Item">
                                            ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà {{ Item.data.ind_no }}
                                        </template>
                                    </Column> 
                                    <Column field="ind_Items" header="‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô" style="width: 80%">
                                        <template #body="Item"> 
                                           {{ Item.data.ind_Items }}
                                        </template>
                                    </Column>  
                                    <Column field="options" header="‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å" style="width: 10%">
                                        <template #body="Item" >   
                                            <Button style="text-align: center;" severity="primary" icon="pi pi-pencil" class="p-button-text" outlined rounded @click="Editcriteria(Item.data)"></Button> &nbsp;
                                            <Button severity="danger" icon="pi pi-trash" class="p-button-text" outlined rounded @click="DeleteRegislick(Item.data.ind_no)"></Button>
                                        </template>
                                    </Column> 
                                </DataTable>
                            </form>
                            <template #footer>
                                <Button label="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" icon="pi pi-check" class="mb-2 mr-2" @click="saveData" /> 
                                <Button label="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å" icon="pi pi-times" class="mb-2 mr-2" severity="danger" @click="resetDialog" />
                            </template>
                        </Dialog> 

                        <!-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô -->
                        <Dialog header="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô" maximizable v-model:visible="DialogAddwork" :breakpoints="{ '960px': '75vw' }" :style="{ width: '70vw' }" :modal="true" position="top">
                            <form>
                                <InputText v-model="text_edt" type="hidden" style="display: none;" /> 
                                    <div class="field col-12 md:col-2" v-show="false">
                                        <InputGroup>
                                            <InputGroupAddon>
                                                <i class="pi pi-sort-numeric-up"></i>
                                            </InputGroupAddon>
                                            <InputText v-model="text_search_nowork" type="number" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà" autocomplete="off" /> 
                                        </InputGroup> 
                                    </div> 
                                    <div class="p-fluid formgrid grid ">
                                        <div class="field col-12 md:col-2">
                                            <label for="text_search_nowork">‡∏•‡∏≥‡∏î‡∏±‡∏ö</label>
                                            <InputGroup>
                                                <InputGroupAddon>
                                                    <i class="pi pi-sort-numeric-up"></i>
                                                </InputGroupAddon>
                                                    <InputText v-model="text_nowork" type="number" placeholder="‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà" autocomplete="off" /> 
                                            </InputGroup> 
                                        </div>
                                        

                                        <div class="field col-12 md:col-3">
                                            <label for="text_Evalua">‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</label>
                                            <InputGroup>
                                                <InputGroupAddon>
                                                    <i class="pi pi-calendar"></i>
                                                </InputGroupAddon>
                                                    <Dropdown v-model="text_Evalua" :options="evaluaOptions" optionLabel="label" optionValue="value" placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô" class="w-full"/>
                                            </InputGroup>
                                        </div> 
                                        <div class="field col-12 md:col-7"> 
                                            <label for="text_search_nowork">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô</label> 
                                            <InputGroup>
                                                <InputGroupAddon>
                                                    <i class="pi pi-book"></i>
                                                </InputGroupAddon>
                                                <Textarea v-model="text_searchwork" rows="1" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô" autocomplete="off" /> 
                                            </InputGroup> 
                                        </div>   
                                    </div>  
                                </form>
                            <template #footer>
                                <Button label="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" icon="pi pi-check" class="mb-2 mr-2" @click="saveDatawork" /> 
                                <Button label="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å" icon="pi pi-times" class="mb-2 mr-2" severity="danger" @click="resetDialogwork" />
                            </template>
                        </Dialog> 

                        <!-- ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô -->
                         <Dialog header="‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô ‡∏õ01" maximizable v-model:visible="DialogCopy" :breakpoints="{ '960px': '75vw' }" :style="{ width: '60vw' }" :modal="true" position="top" >
                            <form>
                                <div class="p-fluid formgrid grid">
                                    <div class="field col-12 md:col-12">
                                        <label>
                                            <b>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å</b>
                                        </label>

                                        <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏õ‡∏µ + ‡∏£‡∏≠‡∏ö ‡∏ó‡∏µ‡πà backend ‡∏™‡πà‡∏á‡∏°‡∏≤ -->
                                        <div
                                            v-for="round in evalRounds"
                                            :key="round.year + '-' + round.evalua"
                                            class="flex align-items-center mb-2"
                                        >
                                            <RadioButton
                                                :inputId="'round-' + round.year + '-' + round.evalua"
                                                name="evalRound"
                                                :value="round"                    
                                                v-model="selectedEvalRound"
                                            />
                                            <label class="ml-2"  :for="'round-' + round.year + '-' + round.evalua" >
                                                <!-- ‡∏õ‡∏µ {{ round.year }} ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà {{ round.evalua }} {{ getRoundDesc(round.evalua) }} -->
                                                 ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà {{ round.evalua }}  {{ getRoundDesc(round.evalua) }}  ‡∏õ‡∏µ {{ round.year }}
                                            </label>
                                        </div>

                                        <small class="text-gray-600">
                                            * ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ/‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö ‡∏õ01 ‡πÑ‡∏ß‡πâ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÉ‡∏ô
                                            ‡∏õ‡∏µ {{ dataP01.year }} ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà {{ dataP01.evalua }}
                                        </small>
                                    </div>
                                </div>
                            </form>

                            <template #footer>
                                <Button
                                    label="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å"
                                    icon="pi pi-check"
                                    class="mb-2 mr-2"
                                    @click="confirmCopyEvaluation"
                                />
                                <Button
                                    label="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å"
                                    icon="pi pi-times"
                                    class="mb-2 mr-2"
                                    severity="danger"
                                    @click="cancelDialogcopy"
                                />
                            </template>
                        </Dialog>

                    </div> 
                </div>  
                <!-- <table class="table table-bordered"> -->
                <table class="table">
                    <thead>
                        <tr>
                            <th rowspan="2" style="width: 20%;">(1) <br> ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏° / ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ / ‡∏á‡∏≤‡∏ô</th>
                            <th rowspan="2" style="width: 24%;">
                            (2) <br> ‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô <br>
                            (1.‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á 2.‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô <br> 3.‡∏ï‡∏£‡∏á‡πÄ‡∏ß‡∏•‡∏≤)
                            </th>
                            <th colspan="5" style="width: 15%;">(3) <br> ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</th>
                            <th rowspan="2" style="width: 7%;">(4) <br> ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ</th>
                            <th rowspan="2" style="width: 10%;">(5) <br> ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç/ <br> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏á‡∏≤‡∏ô)</th>
                            <th rowspan="2" style="width: 10%;">(6) <br> ‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô <br>‡∏ñ‡πà‡∏ß‡∏á‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å <br> (4) X (5) 100</th>
                            <th rowspan="2" style="width: 9%;"><br> ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <br></th>
                        </tr>
                        <tr>
                            <th>1</th>  
                            <th>2</th>  
                            <th>3</th>  
                            <th>4</th>  
                            <th>5</th>  
                        </tr>
                    </thead>
                    <tbody>
                        <template v-for="(item, index) in products_person" :key="index"> 
                                <tr >
                                    <td style="text-align: left;" colspan="8">
                                        <b style="color: blue;"> {{ item.h_no }}. {{ item.nameH }}</b>
                                        <!-- {{ item.id }}. -->
                                    </td>  
                                    <!-- <td class="text-center" style="color: blue;"><b>{{ item.h_weight }}%</b></td> -->
                                    <td></td>
                                    <td></td>
                                    <td>
                                        <Button severity="primary" icon="pi pi-pencil" class="p-button-text" outlined rounded  @click="Edtwork(item)"></Button>&nbsp; 
                                        <Button severity="danger" icon="pi pi-trash" class="p-button-text" outlined rounded @click="Delework(item)"></Button>
                                    </td>
                                </tr>
                                <!-- P01 -->
                                <tr v-for="(subP01, idx) in item.subP01s" :key="idx" style="vertical-align: baseline;"> 
                                    <td style="text-align: left;">{{ subP01.p_no }} {{ subP01.p_subject }}</td>
                                    <td style="text-align: left;">
                                        <b>‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏ó‡∏µ‡πà {{ idx+1 }} {{ subP01.p_subject }}</b>
                                        <p v-for="(subIitem, idI) in subP01.subITems" :key="idI" style="padding-left: 8px;margin-bottom: 5px;">
                                            <div v-if="subIitem.ind_no!=0"><b>‡∏£‡∏∞‡∏î‡∏±‡∏ö {{ subIitem.ind_no }}</b> {{ subIitem.ind_Items }}</div>
                                            <div v-if="subIitem.ind_no==0"><b>{{ subIitem.ind_Items }}</b></div> 
                                        </p>
                                    </td>
                                    <td style=" vertical-align: middle;" class="text-center"> 
                                        <b v-if="subP01.p_target==1">&#10003;</b> 
                                        <b v-if="subP01.p_target!=1"></b> 
                                    </td>
                                    <td style=" vertical-align: middle;" class="text-center"> 
                                        <b v-if="subP01.p_target==2">&#10003;</b> 
                                        <b v-if="subP01.p_target!=2"></b> 
                                    </td>
                                    <td style=" vertical-align: middle;" class="text-center"> 
                                        <b v-if="subP01.p_target==3">&#10003;</b> 
                                        <b v-if="subP01.p_target!=3"></b> 
                                    </td>
                                    <td style=" vertical-align: middle;" class="text-center">
                                        <b v-if="subP01.p_target==4">&#10003;</b> 
                                        <b v-if="subP01.p_target!=4"></b> 
                                    </td>  
                                    <td style=" vertical-align: middle;" class="text-center"> 
                                        <b v-if="subP01.p_target==5">&#10003;</b> 
                                        <b v-if="subP01.p_target!=5"></b>  
                                    </td>
                                    <td style=" vertical-align: middle;" class="text-center">{{ subP01.p_score }}</td>
                                    <td style=" vertical-align: middle;" class="text-center">{{ subP01.p_weight }}%</td> 
                                    <td style=" vertical-align: middle;" class="text-center">{{ (subP01.p_score * subP01.p_weight / 100).toFixed(2) }}</td>
                                    
                                    <td style=" vertical-align: middle;" class="text-center"> 
                                        <SplitButton label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å" :model="itemsBtu(subP01)" severity="warning" class="mb-2 mr-2"></SplitButton>
                                    </td> 
                                </tr> 
                        </template> 
                    </tbody>
                </table>
            </div> 
        </div> 
    </div> 
</template>
<script setup> 
    const { signIn, getSession, signOut } = await useAuth()
    const user = await getSession();
    // console.log(user); 
</script> 
  
  <script> 
  import { ref } from 'vue';
  import axios from 'axios';
  import RadioButton from 'primevue/radiobutton';  
  import Swal from 'sweetalert2'
    export default {
            components: {
            RadioButton,
        },  
        props: { 
            dataP01: {
            type: Object,
            required: true
            }
        },
        data() {
            return { 
                staffid_Main: '',
                year_Main: '',
                facid_Main: '',
                evalua: '',
                groupid_Main: '01',
                dropdownItemYear: null ,
                dropdownItemsYear: [
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2572', value: 2572 },
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2571', value: 2571 },
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2570', value: 2570 }, 
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2569', value: 2569 },
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2568', value: 2568 },
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2567', value: 2567 },
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2566', value: 2566 },
                    { name: '‡∏õ‡∏µ‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 2565', value: 2565 },
                ],
                products_person: [],    
                itemsBtu: (item) => [
                    {
                        label: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                        icon: 'pi pi-refresh',
                        command: () => {
                            this.editData(item);
                        }
                    },
                    {
                        label: '‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                        icon: 'pi pi-times',
                        command: () => {
                            this.delData(item);
                        }
                    }
                ],
                    text_Evalua: null, // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‡πÄ‡∏ä‡πà‡∏ô 1 ‡∏´‡∏£‡∏∑‡∏≠ 2
                    evaluaOptions: [
                    { label: '‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà 1', value: 1 },
                    { label: '‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà 2', value: 2 }
                ],
                // Dialog
                DialogAdd: false, 
                DialogAddwork: false,
                text_edt: null,
                dropdownItemH: null ,
                dropdownItemsH: [],
                text_no: null,
                text_name: null, 
                dropdownItemTarget: null ,
                dropdownItemsTarget: [
                    { name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 1', value: 1 },
                    { name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 2', value: 2 },
                    { name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 3', value: 3 },
                    { name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 4', value: 4 },
                    { name: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢ 5', value: 5 },
                ],
                text_weight: null,
                text_search_no: null,
                text_search: null,
                editIndex: null,
                products_list: [],

                //‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô
                text_search_nowork: null,
                text_searchwork: null,
                text_nowork:null,
                text_Evalua:null,
                products_listwork: [],

                //‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
                DialogCopy: false,
                evalRounds: [],          // ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏≤‡∏á
                selectedEvalRound: null, // ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏à‡∏≤‡∏Å



                
                
  
            }
        },
        created() { 
            this.dropdownItemYear = this.dropdownItemsYear.find(f => f.value === 2568);
        },
        mounted(){ 
            // this.staffid_Main: '',
            this.staffid_Main = this.dataP01.staffid,
            this.year_Main = this.dataP01.year,
            this.facid_Main = this.dataP01.staffdepartment,
            this.evalua = this.dataP01.evalua,
            this.showDataPerson(this.dataP01.year,this.dataP01.staffdepartment,this.dataP01.evalua);
        },

      methods: { 
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏ï‡∏≤‡∏£‡∏≤‡∏á
        showDataPerson(year_id,fac_id,evalua){
            axios.post('   http://127.0.0.1:8000/api/showDataPerson',{  
            fac_id: fac_id,
            evalua: evalua,
            year_id: year_id,
            //‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            //staff_id: staff_id
            }).then(res => {     
               // console.log(res.data);  
                this.products_person=res.data;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        },
        
        // ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å 
        OpenDialogAdd(){
            this.DialogAdd = true; 
            this.text_edt = null;
            this.dropdownItemH = null;
            this.text_no = null;
            this.text_name = null; 
            this.dropdownItemTarget = null;
            this.text_weight = null;
            this.text_search_no = null;
            this.text_search = null;
            this.products_list = [];
            // this.selectDataH(this.year_Main,this.facid_Main );
            this.selectDataH(this.dataP01.year, this.dataP01.staffdepartment);
        },

         // ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å 
         OpenDialogAddwork(){
            this.DialogAddwork = true; 
            this.text_edt = null; 
            this.text_search_nowork = null;
            this.text_searchwork = null;
            this.text_nowork = null;
            this.text_Evalua = null;
            this.products_listwork = [];
            //this.selectDataH(this.dropdownItemYear,this.facid_Main);
        },

        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô
        selectDataH(year,fac){  
            //console.log(this.dataP01);
            
            axios.post('   http://127.0.0.1:8000/api/selectDataPersonH',{
                fac_id : this.dataP01.staffdepartment,
                year_id :this.dataP01.year ,
                evalua : this.dataP01.evalua ,
            }).then(res => {     
                 //console.log('selectDataH',res.data); 
                this.dropdownItemsH=res.data;  
            })
            .catch(error => {
                console.error('Error:', error);
            });
        },
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô 
        async AddDatalist() {
            if (this.text_search_no == null || this.text_search == null) {
                Swal.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏•‡∏≥‡∏î‡∏±‡∏ö - ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô!");
                return;
            }

            // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ editIndex ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î "‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç"
            if (this.editIndex !== null) {
                this.products_list[this.editIndex].ind_no = this.text_search_no;
                this.products_list[this.editIndex].ind_Items = this.text_search;
                this.editIndex = null; // ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                Swal.fire("‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", "", "success");
            } else {
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 5 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                if (this.products_list.length < 5) {
                    this.products_list.push({
                        ind_no: this.text_search_no,
                        ind_Items: this.text_search
                    });
                    Swal.fire("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à", "", "success");
                } else {
                    Swal.fire("‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô ‡∏Ñ‡∏£‡∏ö 5 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß!");
                }
            }

            // ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
            this.products_list.sort((a, b) => a.ind_no - b.ind_no);

            // ‡∏•‡πâ‡∏≤‡∏á input
            this.text_search_no = null;
            this.text_search = null;
        },

        //‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô
        AddDatalistwork(){
            if(this.text_search_nowork == null || this.text_searchwork == null){
                Swal.fire("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏•‡∏≥‡∏î‡∏±‡∏ö - ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô!");
            }else{   
                if (this.products_listwork.length < 5) { 
                    this.products_listwork.push({
                        id: this.text_search_nowork,
                        nameH: this.text_searchwork,
                        staff_id: this.staffid_Main,
                        fac_id: this.facid_Main,
                        year_id: this.year_Main, 
                    });  

                    this.products_listwork.sort((a, b) => a.id - b.id);  
                } else {
                    Swal.fire("‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô ‡∏Ñ‡∏£‡∏ö 5 ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß!");
                }
            }
        },
        // ‡∏•‡∏ö‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î / ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
        DeleteRegislick(data){
            this.products_list = this.products_list.filter(product => product.ind_no !== data); 
        },

        //‡∏•‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô 
        DeleteRegislickwork(data){
            this.products_listwork = this.products_listwork.filter(product => product.id!== data); 
        },

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‡∏õ.1 
        async saveData() {  
            await axios.post('   http://127.0.0.1:8000/api/saveDataPerson', {
                staff_id: this.staffid_Main,
                fac_id: this.facid_Main,
                year_id: this.year_Main,  
                evalua: this.evalua,
                text_edt: this.text_edt,
                dropdownItemH: this.dropdownItemH.id,
                text_no: this.text_no,
                text_name: this.text_name,
                text_target: this.dropdownItemTarget.value,
                text_weight: this.text_weight, 
                products_list: this.products_list, 
            }).then(res => {  
                // console.log(res.data); 
                Swal.fire({
                    title: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",
                    text: "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡πÅ‡∏ö‡∏ö ‡∏õ01 ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",
                    icon: "success"
                });
                this.DialogAdd = false; 
                this.showDataPerson(this.dataP01.year,this.dataP01.staffdepartment,this.dataP01.evalua);
            })
            .catch(error => {
                console.error('Error:', error);
                Swal.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î!", "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ", "error");
                });
            },

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô   
        saveDatawork() {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (!this.text_nowork) {
                Swal.fire({
                    title: "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!",
                    text: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà",
                    icon: "warning"
                });
                return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö
            }

            if (!this.text_Evalua) {
                Swal.fire({
                    title: "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!",
                    text: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô",
                    icon: "warning"
                });
                return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö
            }

            if (!this.text_searchwork) {
                Swal.fire({
                    title: "‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô!",
                    text: "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô",
                    icon: "warning"
                });
                return; // ‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö
            }

            // ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô ‡∏Å‡πá‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            axios.post('http://127.0.0.1:8000/api/saveWork', {
                id: this.text_search_nowork,
                h_no: this.text_nowork,
                h_evalua: this.text_Evalua,
                nameH: this.text_searchwork,
                // fac_id: this.facid_Main,
                // year_id: this.year_Main
                fac_id: this.dataP01.staffdepartment, // ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å props
                year_id: this.dataP01.year             // üëà ‡πÉ‡∏ä‡πâ‡∏õ‡∏µ‡∏à‡∏≤‡∏Å props ‡πÇ
            }).then(res => {
                //console.log(res.data);
                Swal.fire({
                    title: "‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",
                    text: "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!",
                    icon: "success"
                });
                this.DialogAddwork = false;
                this.showDataPerson(this.dataP01.year, this.dataP01.staffdepartment, this.dataP01.evalua);
            }).catch(error => {
                console.error('Error:', error);
                Swal.fire("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î!", "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ", "error");
            });
        },

        // ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
        resetDialog(){
            this.DialogAdd = false; 
        },
        resetDialogwork(){
            this.DialogAddwork = false; 
        },
        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        async editData(data){    
        await axios.post('   http://127.0.0.1:8000/api/edtDataPerson',{
            p_id: data.p_id
        }).then(res => { 
                // console.log(res.data);   
                this.DialogAdd = true; 
                this.text_edt = res.data[0].p_id;   
                this.text_no = res.data[0].p_no; 
                this.text_name = res.data[0].p_subject;  
                const target_f = this.dropdownItemsTarget.filter(f=>f.value==res.data[0].p_target)
                this.dropdownItemTarget = target_f.length > 0 ? target_f[0] : null;    
                this.text_weight = res.data[0].p_weight;  
                this.products_list = res.data[0].sub_ITem; 
                this.selectDataHEdt(res.data[0].p_year,res.data[0].p_facid,res.data[0].h_id,res.data[0].evalua);   
            })
            .catch(error => {
                console.error('Error:', error);
            });
        },
        //‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô 
        async Edtwork(data) {
                try {
                    const res = await axios.post(' http://127.0.0.1:8000/api/Edtwork', {
                    id: data.id,
                    h_no:data.h_no,
                    nameH:data.nameH,
                    h_evalua:data.h_evalua 
                    }); 
                    //console.log("‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ:", res.data); 
                    this.DialogAddwork = true;
                    this.text_search_nowork = res.data.id;
                    this.text_searchwork = res.data.nameH;
                    this.facid_Main = res.data.fac_id; 
                    this.text_nowork = res.data.h_no;
                    this.text_Evalua = res.data.h_evalua;
                } catch (error) {
                    console.error('Error:', error);
                }
            }, 
            async Delework(id){  
                Swal.fire({
                    title: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÅ‡∏ö‡∏ö ‡∏õ01 ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ?",
                    text: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Yes, delete it! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!",
                    icon: "warning",
                    showCancelButton: true,
                    confirmButtonColor: "#3085d6",
                    cancelButtonColor: "#d33",
                    confirmButtonText: "Yes, delete it!"
                    }).then((result) => {
                    if (result.isConfirmed) {
                        axios.post(' http://127.0.0.1:8000/api/Delework',{
                            id:id
                        }).then(res => { 
                                //console.log(res.data);   
                            this.showDataPerson(this.dataP01.year,this.dataP01.staffdepartment,this.dataP01.evalua);
                            Swal.fire({
                            title: "‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!",
                            text: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
                            icon: "success"
                            });
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        }); 
                    }
                }); 
            },   
        //‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏Å‡∏ì‡∏ë‡πå/‡∏ï‡∏±‡∏ß‡∏ä‡∏µ‡πâ‡∏ß‡∏±‡∏î‡∏Ç‡∏≠‡∏á ‡∏õ.01
        Editcriteria(item) {
            const index = this.products_list.findIndex(p => p.ind_no === item.ind_no);
            if (index !== -1) {
                this.text_search_no = item.ind_no;
                this.text_search = item.ind_Items;
                this.editIndex = index;
            }
        }, 
        // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏£‡∏∞‡∏á‡∏≤‡∏ô
        selectDataHEdt(year,fac,he,evalua){  
            //console.log(year,fac,he,evalua);
            
            axios.post('   http://127.0.0.1:8000/api/selectDataPersonH',{
                // year: year,
                // fac: fac,
                // evalua:evalua
                fac_id : this.dataP01.staffdepartment,
                year_id :this.dataP01.year ,
                evalua : this.dataP01.evalua 
            }).then(res => {     
                    //console.log(res.data); 
                this.dropdownItemsH=res.data;  
                const h_f = res.data.filter(f=>f.id==he); 
                this.dropdownItemH = h_f.length > 0 ? h_f[0] : null;    

            })
            .catch(error => {
                console.error('Error:', error);
            });
        },
        // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        async delData(data){  
            Swal.fire({
                title: "‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÅ‡∏ö‡∏ö ‡∏õ01 ‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà ?",
                text: "‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° Yes, delete it! ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡∏ó‡∏±‡∏ô‡∏ó‡∏µ!",
                icon: "warning",
                showCancelButton: true,
                confirmButtonColor: "#3085d6",
                cancelButtonColor: "#d33",
                confirmButtonText: "Yes, delete it!"
                }).then((result) => {
                if (result.isConfirmed) {
                    axios.post('   http://127.0.0.1:8000/api/delDataPerson',{
                        p_id: data.p_id
                    }).then(res => { 
                        // console.log(res);   
                        this.showDataPerson(this.dataP01.year,this.dataP01.staffdepartment,this.dataP01.evalua);
                        Swal.fire({
                        title: "‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô!",
                        text: "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß",
                        icon: "success"
                        });
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    }); 
                }
            }); 
        },   

        // ‡πÄ‡∏õ‡∏¥‡∏î Dialog ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
        copyEvaluationData() {
            this.DialogCopy = true;
            this.selectedEvalRound = null; 
            axios.post('http://127.0.0.1:8000/api/getEvalRoundsForCopy', {
                fac_id: this.dataP01.staffdepartment,
                year_id: this.dataP01.year,
                evalua: this.dataP01.evalua,
            })
            .then(res => { 
                this.evalRounds = res.data;
            })
            .catch(error => {
                console.error('getEvalRoundsForCopy error:', error);
                Swal.fire('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏µ/‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÑ‡∏î‡πâ', 'error');
            });
        },

        // ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        async confirmCopyEvaluation() {
            if (!this.selectedEvalRound) {
                Swal.fire('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏µ/‡∏£‡∏≠‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å', 'warning');
                return;
            }

            const fromYear   = this.selectedEvalRound.year;
            const fromEvalua = this.selectedEvalRound.evalua;
            const toYear     = this.dataP01.year;
            const toEvalua   = this.dataP01.evalua;

            try {
                await axios.post('http://127.0.0.1:8000/api/copyDataP01FromRound', {
                    fac_id: this.dataP01.staffdepartment,
                    from_year: fromYear,
                    to_year: toYear,
                    from_evalua: fromEvalua,
                    to_evalua: toEvalua,
                    staff_id: this.staffid_Main,    
                });

                this.DialogCopy = false;

                // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏µ/‡∏£‡∏≠‡∏ö‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà
                this.showDataPerson(this.dataP01.year, this.dataP01.staffdepartment, this.dataP01.evalua);

                Swal.fire({
                    title: '‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                    text: `‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å ‡∏õ‡∏µ ${fromYear} ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${fromEvalua} ‚Üí ‡∏õ‡∏µ ${toYear} ‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà ${toEvalua} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢`,
                    icon: 'success'
                });
            } catch (error) {
                console.error('Error copyDataP01FromRound:', error);
                Swal.fire('‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ', 'error');
            }
        },
        cancelDialogcopy() {
            this.DialogCopy = false;
            this.selectedEvalRound = null;
        },

        getRoundDesc(evalua) { 
            const round = parseInt(evalua, 10);
            if (round === 1) {
                return '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô ‡∏ñ‡∏∂‡∏á ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 28/29 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå';
            } else if (round === 2) {
                return '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 1 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° ‡∏ñ‡∏∂‡∏á ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 31 ‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°';
            }
            return '';
        },
 
    } 
}
  
  </script>
  
  <style scoped> 
  label{
      font-size: medium;
      font-weight: 500;
  }
  .card-header {
      text-align: left;  
      margin: 0;  
      padding: 0;  
  }
  .table th {
      background-color: #edf2bb;
      font-weight: bold;
  }
  
  </style>